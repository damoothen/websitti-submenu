!function(a){a.fn.submenu=function(b){var c={duration:200};return b=a.extend({},c,b),this.each(function(){var c=a(this),d=a(window),e=c.data("target"),f=c.data("align"),g=a("#"+e),h=!1,i=g.outerWidth(),j=c.offset();c.after(g),g.outerWidth()<c.outerWidth()?i=c.outerWidth():i>d.width()?(i=d.width(),j.left=0):"right"===f?(j.left=j.left-i+c.outerWidth(),j.left<0&&(j.left=0)):j.left+g.outerWidth()>d.width()&&(j.left=d.width()-g.outerWidth()),g.width(i),g.offset(j);var k=function(a){a.preventDefault();var c=a.data;h||c.css({opacity:0,visibility:"visible"}).animate({opacity:1},b.duration,function(){h=!0,d.bind("click",c,l),g.bind("mouseleave",c,l)})},l=function(a){if(h){var c=a.data;c.animate({opacity:0},b.duration,function(){c.css("visibility","hidden"),h=!1,d.unbind("click",l),g.unbind("mouseleave",l)})}};c.bind("click",g,k)})}}(jQuery);