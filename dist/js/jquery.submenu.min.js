!function(a){a.fn.submenu=function(b){var c={duration:200};return b=a.extend({},c,b),this.each(function(){var c=a(this),d=a(window),e=c.data("target"),f=c.data("align"),g=a("#"+e),h=!1,i=function(a){if(a.preventDefault(),!h){var e=g.outerWidth(),i=c.offset();c.after(g),g.outerWidth()<c.outerWidth()&&(e=c.outerWidth()),e>d.width()&&(e=d.width(),i.left=0),"right"===f?(i.left=i.left-e+c.outerWidth(),i.left<0&&(i.left=0)):i.left+g.outerWidth()>d.width()&&(i.left=d.width()-g.outerWidth()),g.width(e),g.offset(i);var k=a.data;k.css({opacity:0,visibility:"visible"}).animate({opacity:1},b.duration,function(){h=!0,d.bind("click",k,j),g.bind("mouseleave",k,j)})}},j=function(a){if(h){var c=a.data;c.animate({opacity:0},b.duration,function(){c.css("visibility","hidden"),h=!1,d.unbind("click",j),g.unbind("mouseleave",j)})}};c.bind("click",g,i)})}}(jQuery);